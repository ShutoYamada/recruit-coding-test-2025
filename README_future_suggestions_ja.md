# 🎬 映画チケット販売システムの改善提案

_（実運用を見据えた将来志向の提案 – スマート自動券売システムへ）_

---

## 1️⃣. 生年月日／身分証による年齢自動判定

### **現状**

現行システムでは、ユーザーが自分で「Adult / Young / Child」を選択します。
また、複数枚購入時に各チケットの rating や上映時刻・上映時間が1枚目と異なる場合の整合性チェックは行われていません（全て1枚目の情報として扱われます）。
この方法だと、誤入力や意図的な不正選択による年齢詐称が発生しやすいです。

### **提案**

PG-12やR18+など年齢制限付き映画のチケット購入時、自動券売機は：

- マイナンバーカード等の身分証をスキャン、または生年月日を入力させる
- 年齢を自動計算し、適切な券種・年齢制限を自動判定

年齢条件を満たさない場合：

> ❌「申し訳ありません。本作品は年齢制限がございます。チケットを購入できません。」

### **メリット**

- 完全自動化でスタッフ不要
- 不正・誤入力防止
- 信頼性・ユーザー体験向上

---

## 2️⃣. 同一上映回の複数枚購入データ入力の簡素化

### **現状**

現行仕様では、同じ映画・同じ上映回で複数枚購入する場合、各行ごとにrating・上映時刻・上映時間を毎回入力する必要があります。

例：

```typescript
const a = solve('Adult,G,10:00,1:00,A-1');
const y = solve('Young,G,10:00,1:00,A-2');
const c = solve('Child,G,10:00,1:00,I-3');
```

### **しかし**

実装上は、最初の1枚（tickets[0]）の情報のみを参照し、他のチケットも同じ上映回として扱っています。よって、毎回同じ情報を繰り返し入力する必要はありません。

### **提案**

1行目で上映情報を入力し、2行目以降は座席・年齢区分（または生年月日）のみ入力する形に変更：

例：

```
Adult,G,10:00,1:00      ← 1行目：映画・上映情報
A-1,Adult
A-2,Young
I-3,Child
```

全チケットに同じrating・上映時刻・上映時間を自動適用します。

### **メリット**

- 入力作業の大幅削減
- 入力ミス防止
- 「映画選択→上映回選択→座席選択→利用者情報入力」という実際の券売機UXに近い
- タッチパネル券売機の現場体験に即した設計

---

## 3️⃣. 「1枚でもNGなら全体NG」ルール（全体不可）

### **現状**

- グループ内で1枚でも不正（例：ChildがR18+を購入）なら、全体がNGとなり、理由のみ表示されます。
- 安全性は高いが、券売機UIでは理由が分かりづらい。

### **提案**

- グループ判定ロジックは維持しつつ、UIで個別エラーを明示：
  - 各チケットごとにエラー内容を表示
  - エラー発生時は：

> ⚠️「I-3（Child）はR18+年齢制限のため購入不可です。」
> 「他のチケットは購入可能です。購入可能分のみ続行しますか？」

- ユーザー選択肢：
  - いいえ → 全体キャンセル（現行ルール）
  - はい → NGチケットを除外し、残りのみ購入

### **拡張提案**

設定オプション追加：

**設定オプション例：**

- **Strict Mode（厳格モード）**
  - 1枚でもNGなら全体NG（全てキャンセル）
  - 想定利用シーン：大型シネコン・厳格運用

- **Flexible Mode（柔軟モード）**
  - OKなチケットのみ購入、NGは除外
  - 想定利用シーン：自動券売機・ユーザーフレンドリーな運用

---
